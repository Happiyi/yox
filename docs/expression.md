表达式是所有模板语法的基础，没有一个优秀的表达式引擎，再好的模板语法都是空中楼阁。

Yox 内置了一个非常强大的表达式引擎，不仅支持常见的 `一元运算`，`二元运算` 和 `三元运算`，还支持 `基本类型字面量`、`数组字面量`、`对象字面量`、`数组索引访问`、`对象属性访问` 和 `函数调用`。

## 一元运算

```html
<div>
  {{+a}} {{-a}} {{~a}} {{!a}} {{!!a}}
</div>
```


## 二元运算

```html
<div>
  <!-- 数学计算 -->
  {{a + b}} {{a - b}} {{a * b}} {{a / b}} {{a % b}}

  <!-- 布尔比较 -->
  {{a > b}} {{a < b}}
  {{a >= b}} {{a <= b}}
  {{a == b}} {{a != b}}
  {{a === b}} {{a !== b}}
  {{a && b}} {{a || b}}

  <!-- 位运算 -->
  {{a & b}} {{a | b}} {{a ^ b}}

  <!-- 位移 -->
  {{a << b}} {{a >> b}} {{a >>> b}}
</div>
```


## 三元运算

```html
<div>
  {{a ? b : c}}
</div>
```


## 基本类型字面量

```html
<div>
  <!-- 数字 -->
  {{0}} {{1}}

  <!-- 字符串 -->
  {{'0'}} {{"1"}}

  <!-- 布尔 -->
  {{true}} {{false}}

  <!-- 空值 -->
  {{null}} {{undefined}}
</div>
```


## 数组字面量

```html
<div>
  {{[1, 2, 3, 4]}}
</div>
```


## 对象字面量

```html
<div>
  <!--
    在 {{ 的右侧 和 }} 的左侧要打一个空格
    因为 {{{ 和 }}} 在模板语法中表示“非转义插值”
  -->
  {{ { name: 'yox', age: 100 } }}
</div>
```


## 数组索引访问

```html
<div>
  {{users.0.name}}
</div>
```


## 对象属性访问

```html
<div>
  {{user.name}}
</div>
```


## 函数调用

函数调用有两种使用场景。

第一种是调用 `过滤器` 获得一个更符合需求的数据格式，比如格式化日期：

```html
<div>
  生日：{{formatDate(birthday)}}
</div>
```

> 更多内容，请参考 **模板** - **过滤器**

第二种是在 `指令` 中调用组件注册的方法，比如监听事件：

```html
<button on-click="submit()">
  Submit
</button>
```


## 全局函数

不同的运行时环境，会有不同的全局函数，虽然常见的 `parseInt`、`parseFloat` 等函数似乎在你能接触到的所有环境中都存在，却也无法保证未来可能出现的新环境会继续存在。

基于这样的考虑，表达式调用的函数必须经过**注册**，也就是说，所谓的全局函数，完全由你来定义，你可以内置 `lodash`，也可以内置 `underscore`。


## 无副作用

表达式的目的是求值，不应对原有数据造成任何改动，这就是为什么我们不支持 `a++`、`++a`、`a--`、`--a` 的原因。

> 如果你想通过表达式修改数据，唯一的方式是在调用的函数中进行修改。


## 表达式 vs 语句

也许有人还分不清 `表达式` 和 `语句`，简单来说，`表达式` 会产生一个**值**，`语句` 则是表达一种**逻辑**，比如循环或条件。

Yox 只支持 `表达式`，不支持 `语句`，也就是说，下面这些示例全都不会生效：

```html
<div>
  <!-- 这是语句，不是表达式 -->
  {{var a = 1}}

  <!-- 条件判断也不会生效，请使用三元表达式 -->
  {{if (ok) { return message }}}
</div>
```