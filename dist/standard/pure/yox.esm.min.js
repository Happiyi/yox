const t=!0,e=!1,n=null,r=void 0,i=-1,s="value",o="length",c="function",u="*",f=".",a="undefined"!=typeof window?window:r,h="undefined"!=typeof global?global:a,l=function(){},p=Object.freeze({}),d=Object.freeze([]),g="";class m{constructor(t,e){this.type=t,this.phase=m.PHASE_CURRENT,e&&(this.originalEvent=e)}preventDefault(){const e=this;if(!e.isPrevented){const{originalEvent:n}=e;n&&n.preventDefault(),e.isPrevented=t}return e}stopPropagation(){const e=this;if(!e.isStoped){const{originalEvent:n}=e;n&&n.stopPropagation(),e.isStoped=t}return e}prevent(){return this.preventDefault()}stop(){return this.stopPropagation()}}function v(t){return t!==r}function y(t){return typeof t===c}function b(t){return Array.isArray(t)}function w(t){return t!==n&&"object"==typeof t}function x(t){return"string"==typeof t}function $(t){return"number"==typeof t}function E(t){return"boolean"==typeof t}function A(t){return $(t)||x(t)&&!isNaN(parseFloat(t))&&isFinite(t)}m.PHASE_CURRENT=0,m.PHASE_UPWARD=1,m.PHASE_DOWNWARD=i;var O=Object.freeze({func:y,array:b,object:w,string:x,number:$,boolean:E,numeric:A});function k(t,e,n){if(y(t))return b(n)?t.apply(e,n):v(e)?t.call(e,n):v(n)?t(n):t()}function C(t,n,r){const{length:i}=t;if(i)if(r)for(let r=i-1;r>=0&&n(t[r],r)!==e;r--);else for(let r=0;r<i&&n(t[r],r)!==e;r++);}function P(t,e){t[t.length]=e}function j(t,e){t.unshift(e)}function R(t,e,n){b(e)?C(e,function(e){n(t,e)}):n(t,e)}function z(t,e){R(t,e,P)}function S(t,e){R(t,e,j)}function T(t,n,r){let s=i;return C(t,function(t,i){if(r===e?t==n:t===n)return s=i,e}),s}function D(n,r,i){let s=0;return C(n,function(t,o){(i===e?t==r:t===r)&&(n.splice(o,1),s++)},t),s}function W(t,e,n){return T(t,e,n)>=0}function N(t){return!b(t)||!t.length}var _=Object.freeze({each:C,push:z,unshift:S,indexOf:T,last:function(t){const{length:e}=t;if(e>0)return t[e-1]},pop:function(t){const{length:e}=t;if(e>0)return t.pop()},remove:D,has:W,toArray:function(t){return b(t)?t:k(d.slice,t)},toObject:function(t,e,n){let r={};return C(t,function(t){r[e?t[e]:t]=n||t}),r},join:function(t,e){return t.join(e)},falsy:N});const U=/-([a-z])/gi,H=/\B([A-Z])/g,I=/^[a-z]/,Y={},L={},M={};function q(t,e,n){return $(n)?e===n?g:t.slice(e,n):t.slice(e)}function F(t,e,n){return t.indexOf(e,v(n)?n:0)}function K(t,e,n){return t.lastIndexOf(e,v(n)?n:t.length)}function B(t,e){return 0===F(t,e)}function G(t,e){return t.charCodeAt(e||0)}function V(t){return t.toUpperCase()}function X(t){return t.toLowerCase()}function Z(t,e){return F(t,e)>=0}function J(t){return!x(t)||!t.length}var Q=Object.freeze({camelize:function(t){return Y[t]||(Y[t]=t.replace(U,function(t,e){return V(e)})),Y[t]},hyphenate:function(t){return L[t]||(L[t]=t.replace(H,function(t,e){return"-"+X(e)})),L[t]},capitalize:function(t){return M[t]||(M[t]=t.replace(I,V)),M[t]},trim:function(t){return J(t)?g:t.trim()},slice:q,indexOf:F,lastIndexOf:K,startsWith:B,endsWith:function(t,e){const n=t.length-e.length;return n>=0&&K(t,e)===n},charAt:function(t,e){return t.charAt(e||0)},codeAt:G,upper:V,lower:X,has:Z,falsy:J});const tt=/\./g,et=/\*/g,nt=/\*\*/g,rt={},it={};function st(t,e){return t===e?e.length:B(t,e+=f)?e.length:i}function ot(t,n){const r=rt.hasOwnProperty(t)?rt[t]:rt[t]=t.split(f);for(let t=0,i=r.length-1;t<=i&&n(r[t],t===i)!==e;t++);}function ct(t,e){let n=it[e];if(!n){const t=e.replace(tt,"\\.").replace(et,"(\\w+)").replace(nt,"([.\\w]+?)");n=it[e]=new RegExp(`^${t}$`)}const r=t.match(n);if(r)return r[1]}const ut={value:r};function ft(t){return Object.keys(t)}function at(t,e){return t.length-e.length}function ht(t,e){return e.length-t.length}function lt(t,e){return ft(t).sort(e?ht:at)}function pt(t,n){for(let r in t)if(n(t[r],r)===e)break}function dt(t){pt(t,function(e,n){delete t[n]})}function gt(t,e){return pt(e,function(e,n){t[n]=e}),t}function mt(t,e){let n=t;return b(t)?e?(n=[],C(t,function(t,r){n[r]=mt(t,e)})):n=t.slice():w(t)&&(n={},pt(t,function(t,r){n[r]=e?mt(t,e):t})),n}function vt(t,i){return ot(i,function(i,s){if(t==n)return t=r,e;{let e=t[i],n=v(e);e&&y(e.get)&&(e=e.get()),s?n?(ut.value=e,t=ut):t=r:t=e}}),t}function yt(t,n,r,i){ot(n,function(n,s){if(s)t[n]=r;else if(t[n])t=t[n];else{if(!i)return e;t=t[n]={}}})}function bt(t,e){return v(t[e])}var wt=Object.freeze({keys:ft,sort:lt,each:pt,clear:dt,extend:gt,merge:function(t,e){return t&&e?gt(gt({},t),e):t||e},copy:mt,get:vt,set:yt,has:bt,falsy:function(t){return!w(t)||b(t)||!ft(t).length}});function xt(t,e){return t!=n&&t.toString?t.toString():v(e)?e:g}const $t=1,Et=2,At=3,Ot=4,kt=5,Ct="undefined"!=typeof console?console:n,Pt=/yox/.test(xt(l))?Et:At,jt=a&&/edge|msie|trident/i.test(a.navigator.userAgent)?g:"%c",Rt=Ct?jt?function(t,e,n){Ct.log(jt+t,n,e)}:function(t,e){Ct.log(t,e)}:l;function zt(){if(h){const t=h.YOX_LOG_LEVEL;if(t>=$t&&t<=kt)return t}return Pt}function St(t){return`background-color:${t};border-radius:12px;color:#fff;font-size:10px;padding:3px 6px;`}var Tt=Object.freeze({DEBUG:$t,INFO:Et,WARN:At,ERROR:Ot,FATAL:kt,debug:function(t,e){zt()<=$t&&Rt(e||"Yox debug",t,St("#999"))},info:function(t,e){zt()<=Et&&Rt(e||"Yox info",t,St("#2db7f5"))},warn:function(t,e){zt()<=At&&Rt(e||"Yox warn",t,St("#f90"))},error:function(t,e){zt()<=Ot&&Rt(e||"Yox error",t,St("#ed4014"))},fatal:function(t,e){if(zt()<=kt)throw new Error(`[${e||"Yox fatal"}]: ${t}`)}});class Dt{constructor(t){this.ns=t||e,this.listeners={}}fire(n,i,s){let o=this,c=x(n)?o.parse(n):n,u=o.listeners[c.type],f=t;if(u){u=mt(u);const t=i&&i[0]instanceof m?i[0]:r;C(u,function(n){if(!_t(c.ns,n)||!W(u,n)||s&&!s(c,i,n))return;t&&(t.listener=n.fn);let a=k(n.fn,n.ctx,i);return t&&(t.listener=r),n.num=n.num?n.num+1:1,n.num===n.max&&o.off(c,n.fn),t&&(a===e?t.prevent().stop():t.isStoped&&(a=e)),a===e?f=e:void 0})}return f}on(t,e){const n=this,r=n.listeners,i=y(e)?{fn:e}:e;if(w(i)&&y(i.fn)){const e=x(t)?n.parse(t):t;i.ns=e.ns,z(r[e.type]||(r[e.type]=[]),i)}}off(e,n){const r=this,i=r.listeners;if(e){const s=x(e)?r.parse(e):e,o=s.type,c=s.ns,u=Nt(n),f=function(e,n){C(e,function(t,n){u(t)&&_t(c,t)&&e.splice(n,1)},t),e.length||delete i[n]};o?i[o]&&f(i[o],o):c&&pt(i,f)}else r.listeners={}}has(n,r){let i=this.listeners,s=x(n)?this.parse(n):n,o=s.type,c=s.ns,u=t,f=Nt(r),a=function(t){return C(t,function(t){if(f(t)&&_t(c,t))return u=e}),u};return o?i[o]&&a(i[o]):c&&pt(i,a),!u}parse(t){const e={type:t,ns:g};if(this.ns){const n=F(t,f);n>=0&&(e.type=q(t,0,n),e.ns=q(t,n+1))}return e}}function Wt(){return t}function Nt(t){return y(t)?function(e){return t===e.fn}:Wt}function _t(e,n){const{ns:r}=n;return r&&e?r===e:t}function Ut(t){return y(t)&&Z(xt(t),"[native code]")}let Ht;typeof setImmediate===c&&Ut(setImmediate)&&(Ht=setImmediate);var It=Ht=typeof MessageChannel===c&&Ut(MessageChannel)?function(t){const e=new MessageChannel;e.port1.onmessage=t,e.port2.postMessage(1)}:setTimeout;let Yt;class Lt{static shared(){return Yt||(Yt=new Lt)}constructor(){this.tasks=[]}append(t,e){const n=this,{tasks:r}=n;z(r,{fn:t,ctx:e}),1===r.length&&It(function(){n.run()})}prepend(t,e){const n=this,{tasks:r}=n;S(r,{fn:t,ctx:e}),1===r.length&&It(function(){n.run()})}clear(){this.tasks.length=0}run(){const{tasks:t}=this;t.length&&(this.tasks=[],C(t,function(t){k(t.fn,t.ctx)}))}}function Mt(t,e){return A(t)?+t:v(e)?e:0}class qt{constructor(e,n,r,i,s,o,c){const u=this;u.keypath=e,u.cache=r,u.deps=i,u.context=s.context,u.observer=s,u.getter=o,u.setter=c,u.unique={},u.watcher=function(n,r,i){const o=u.value,c=u.get(t);c!==o&&s.diff(e,c,o)},u.watcherOptions={sync:n,watcher:u.watcher},(u.fixed=!N(i))&&C(i,function(t){s.watch(t,u.watcherOptions)})}get(t){const e=this,{getter:n,context:r}=e;if(e.cache){if(t||!bt(e,s))if(e.fixed)e.value=k(n,r);else{e.unbind();const t=qt.current;qt.current=e,e.value=k(n,r),e.bind(),qt.current=t}}else e.value=k(n,r);return e.value}set(t){const{setter:e,context:n}=this;e&&e.call(n,t)}add(e){this.unique[e]=t}bind(){const{unique:t,deps:e,observer:n,watcherOptions:r}=this;pt(t,function(t,i){z(e,i),n.watch(i,r)}),this.unique={}}unbind(){const{deps:e,observer:n,watcher:r}=this;C(e,function(t){n.unwatch(t,r)},t),e.length=0}}function Ft(t,n){let r;return C(t,function(t){const i=st(n,t);if(i>=0)return r={name:t,prop:q(n,i)},e}),r}function Kt(t,e){if(t==n||e===g)return t;const r=vt(t,e);return r?r.value:void 0}function Bt(e,n,i,s,c){const u=function(t,n,r){if(n!==r){const u=(o=t,(i=e)&&o?i+f+o:i||o);C(s,function(t){v(ct(u,t))&&c(t,u,n,r)}),Bt(u,n,r,s,c)}var i,o};(function(e,n,i){const s=x(e),c=x(n);if(s||c)return i(o,s?e.length:r,c?n.length:r),t})(n,i,u)||function(e,n,i){const s=b(e),c=b(n);if(s||c){const u=s?e.length:r,f=c?n.length:r;i(o,u,f);for(let t=0,s=Math.max(u||0,f||0);t<s;t++)i(""+t,e?e[t]:r,n?n[t]:r);return t}}(n,i,u)||function(t,e,n){const r=w(t),i=w(e);(r||i)&&(t=r?t:p,e=i?e:p,r&&pt(t,function(t,r){t!==e[r]&&n(r,t,e[r])}),i&&pt(e,function(e,r){e!==t[r]&&n(r,t[r],e)}))}(n,i,u)}function Gt(t,e,n,r,i,s){let o;pt(r,function(r,c){if(function(t){return Z(t,u)}(c))return void(v(ct(t,c))?s(c,t,e,n):i&&(o?z(o,c):o=[c]));const f=st(c,t);if(f>=0){const t=q(c,f),r=Kt(e,t),i=Kt(n,t);r!==i&&s(c,c,r,i)}}),o&&Bt(t,e,n,o,s)}function Vt(t,e,n){if(n.count&&e)return n.count--,e[0]!==e[1]}const Xt={watcher:l};function Zt(e,n){return y(e)?(Xt.watcher=e,Xt.immediate=n===t,Xt):e&&e.watcher?e:void 0}class Jt{constructor(t,e){this.data=t||{},this.context=e||this,this.nextTask=new Lt,this.syncEmitter=new Dt,this.asyncEmitter=new Dt,this.asyncChanges={}}get(t,e,n){const r=qt.current,{data:i,computed:s,reversedComputedKeys:o}=this;if(t===g)return i;let c,u;if(r&&!n&&r.add(t),s){if(u=s[t])return u.get();if(o){const e=Ft(o,t);e&&e.prop&&(c=vt(s[e.name].get(),e.prop))}}return c||(c=vt(i,t)),c?c.value:e}set(t,e){const n=this,{data:r,computed:i,reversedComputedKeys:s}=n,o=function(t,e){const o=n.get(e);if(t===o)return;let c;if(i&&((c=i[e])&&c.set(t),s)){const n=Ft(s,e);if(n&&n.prop&&(c=i[n.name])){const e=c.get();w(e)&&yt(e,n.prop,t)}}c||yt(r,e,t),n.diff(e,t,o)};x(t)?o(e,t):w(t)&&pt(t,o)}diff(e,n,i){const s=this,{syncEmitter:o,asyncEmitter:c,asyncChanges:u}=s,f=36!==G(e);Gt(e,n,i,o.listeners,f,function(t,e,n,r){o.fire(t,[n,r,e])}),Gt(e,n,i,c.listeners,f,function(e,n,i,o){C(c.listeners[e],function(t){t.count++});const{keypaths:f}=u[n]||(u[n]={value:o,keypaths:[]});W(f,e)||z(f,e),s.pending||(s.pending=t,s.nextTask.append(function(){s.pending&&(s.pending=r,s.diffAsync())}))})}diffAsync(){const t=this,{asyncEmitter:e,asyncChanges:n}=t;t.asyncChanges={},pt(n,function(n,r){const i=[t.get(r),n.value,r];C(n.keypaths,function(t){e.fire(t,i,Vt)})})}addComputed(e,n){let r,i,s=t,o=t,c=[];if(y(n))r=n;else if(w(n)){const t=n;E(t.cache)&&(s=t.cache),E(t.sync)&&(o=t.sync),b(t.deps)&&(c=mt(t.deps)),y(t.get)&&(r=t.get),y(t.set)&&(i=t.set)}if(r){const n=this,u=new qt(e,o,s,c,n,r,i);return n.computed||(n.computed={}),n.computed[e]=u,n.reversedComputedKeys=lt(n.computed,t),u}}removeComputed(e){const n=this,{computed:r}=n;r&&bt(r,e)&&(delete r[e],n.reversedComputedKeys=lt(r,t))}watch(t,e,n){const i=this,{context:s,syncEmitter:o,asyncEmitter:c}=i,u=function(t,e){const n=e.sync?o:c,u={fn:e.watcher,ctx:s,count:0};e.once&&(u.max=1),n.on(t,u),e.immediate&&k(e.watcher,s,[i.get(t),r,t])};x(t)?u(t,Zt(e,n)):pt(t,function(t,e){u(e,Zt(t))})}unwatch(t,e){this.syncEmitter.off(t,e),this.asyncEmitter.off(t,e)}toggle(t){const e=!this.get(t);return this.set(t,e),e}increase(t,e,n){const r=Mt(this.get(t),0)+(e||1);if(!$(n)||r<=n)return this.set(t,r),r}decrease(t,e,n){const r=Mt(this.get(t),0)-(e||1);if(!$(n)||r>=n)return this.set(t,r),r}insert(n,r,i){let s=this.get(n);s=b(s)?mt(s):[];const{length:o}=s;if(i===t||i===o)s.push(r);else if(i===e||0===i)s.unshift(r);else{if(!(i>0&&i<o))return;s.splice(i,0,r)}return this.set(n,s),t}append(e,n){return this.insert(e,n,t)}prepend(t,n){return this.insert(t,n,e)}removeAt(e,n){let r=this.get(e);if(b(r)&&n>=0&&n<r.length)return(r=mt(r)).splice(n,1),this.set(e,r),t}remove(e,n){let r=this.get(e);if(b(r)&&D(r=mt(r),n))return this.set(e,r),t}copy(t,e){return mt(t,e)}destroy(){this.syncEmitter.off(),this.asyncEmitter.off(),this.nextTask.clear(),dt(this)}}class Qt{constructor(e){const n=this,r=e||p;n.$emitter=new Dt(t),r.events&&n.on(r.events);let{data:i,props:s,vnode:o,propTypes:c,computed:u,methods:f,watchers:a,extensions:h}=r;n.$options=r,h&&gt(n,h);const l=s?mt(s):{},d=n.$observer=new Jt(l,n);u&&pt(u,function(t,e){d.addComputed(e,t)});const g=y(i)?k(i,n,e):i;w(g)&&pt(g,function(t,e){l[e]=t}),f&&pt(f,function(t,e){n[e]=t}),function(t,e){e&&t.watch(e)}(n,a)}static define(t){return t}static use(t){t.install(Qt)}static nextTick(t,e){Lt.shared().append(t,e)}static compile(t,e){return g}static directive(t,e){}static transition(t,e){}static component(t,e){}static partial(t,e){}static filter(t,e){}get(t,e){return this.$observer.get(t,e)}set(t,e){const{$observer:n}=this;n&&n.set(t,e)}on(t,e){return ee(this,t,e),this}once(e,n){return ee(this,e,n,t),this}off(t,e){return this.$emitter.off(t,e),this}fire(e,n,i){let s,o=this,{$emitter:c,$parent:u,$children:f}=o,a=e instanceof m?e:new m(e),h=[a];if(a.ns===r){const t=c.parse(a.type);a.type=t.type,a.ns=t.ns}return a.target||(a.target=o),w(n)?z(h,n):n===t&&(i=t),(s=c.fire(a,h))&&(i?f&&(a.phase=m.PHASE_DOWNWARD,C(f,function(e){return s=e.fire(a,n,t)})):u&&(a.phase=m.PHASE_UPWARD,s=u.fire(a,n))),s}watch(t,e,n){return this.$observer.watch(t,e,n),this}unwatch(t,e){return this.$observer.unwatch(t,e),this}loadComponent(t,e){}createComponent(t,e){return this}directive(t,e){}transition(t,e){}component(t,e){}partial(t,e){}filter(t,e){}forceUpdate(t){}render(){}update(t,e){}checkProp(t,e){}destroy(){const{$parent:t,$options:e,$emitter:n,$observer:r}=this;r.destroy(),n.off(),dt(this)}nextTick(t){this.$observer.nextTask.append(t,this)}toggle(t){return this.$observer.toggle(t)}increase(t,e,n){return this.$observer.increase(t,e,n)}decrease(t,e,n){return this.$observer.decrease(t,e,n)}insert(t,e,n){return this.$observer.insert(t,e,n)}append(t,e){return this.$observer.append(t,e)}prepend(t,e){return this.$observer.prepend(t,e)}removeAt(t,e){return this.$observer.removeAt(t,e)}remove(t,e){return this.$observer.remove(t,e)}copy(t,e){return this.$observer.copy(t,e)}}function te(t,e,n,r){const i={fn:n,ctx:t};r&&(i.max=1),t.$emitter.on(e,i)}function ee(t,e,n,r){x(e)?te(t,e,n,r):pt(e,function(e,n){te(t,n,e,r)})}Qt.version="1.0.0-alpha.92",Qt.is=O,Qt.array=_,Qt.object=wt,Qt.string=Q,Qt.logger=Tt,Qt.Event=m,Qt.Emitter=Dt;export default Qt;
//# sourceMappingURL=yox.esm.min.js.map
