const t=!0,e=!1,n=null,r=void 0,i="value",s="length",o="function",c="*",u=-1,f="undefined"!=typeof window?window:r,a="undefined"!=typeof global?global:f,h=function(){},l=Object.freeze({}),p=Object.freeze([]),d="";function g(t){return t!==r}function m(t){return typeof t===o}function v(t){return Array.isArray(t)}function y(t){return t!==n&&"object"==typeof t}function b(t){return"string"==typeof t}function w(t){return"number"==typeof t}function x(t){return"boolean"==typeof t}function $(t){return w(t)||b(t)&&!isNaN(parseFloat(t))&&isFinite(t)}var E=Object.freeze({func:m,array:v,object:y,string:b,number:w,boolean:x,numeric:$});function A(t,e,n){if(m(t))return v(n)?t.apply(e,n):g(e)?t.call(e,n):g(n)?t(n):t()}class C{constructor(t,e){this.type=t,this.phase=C.PHASE_CURRENT,e&&(this.originalEvent=e)}preventDefault(){const e=this;if(!e.isPrevented){const{originalEvent:n}=e;n&&n.preventDefault(),e.isPrevented=t}return e}stopPropagation(){const e=this;if(!e.isStoped){const{originalEvent:n}=e;n&&n.stopPropagation(),e.isStoped=t}return e}prevent(){return this.preventDefault()}stop(){return this.stopPropagation()}}function O(t,n,r){const{length:i}=t;if(i)if(r)for(let r=i-1;r>=0&&n(t[r],r,i)!==e;r--);else for(let r=0;r<i&&n(t[r],r,i)!==e;r++);}function k(t,e){t[t.length]=e}function P(t,e){t.unshift(e)}function j(t,e,n){v(e)?O(e,function(e){n(t,e)}):n(t,e)}function R(t,e){j(t,e,k)}function z(t,e){j(t,e,P)}function S(t,n,r){let i=u;return O(t,function(t,s){if(r===e?t==n:t===n)return i=s,e}),i}function T(n,r,i){let s=0;return O(n,function(t,o){(i===e?t==r:t===r)&&(n.splice(o,1),s++)},t),s}function D(t,e,n){return S(t,e,n)>=0}function W(t){return!v(t)||!t.length}C.PHASE_CURRENT=0,C.PHASE_UPWARD=1,C.PHASE_DOWNWARD=u;var N=Object.freeze({each:O,push:R,unshift:z,indexOf:S,last:function(t){const{length:e}=t;if(e>0)return t[e-1]},pop:function(t){const{length:e}=t;if(e>0)return t.pop()},remove:T,has:D,toArray:function(t){return v(t)?t:A(p.slice,t)},toObject:function(t,e,n){let r={};return O(t,function(t){r[e?t[e]:t]=n||t}),r},join:function(t,e){return t.join(e)},falsy:W});const _=/-([a-z])/gi,U=/\B([A-Z])/g,H=/^[a-z]/,I={},Y={},L={};function M(t,e,n){return w(n)?e===n?d:t.slice(e,n):t.slice(e)}function q(t,e,n){return t.indexOf(e,g(n)?n:0)}function F(t,e,n){return t.lastIndexOf(e,g(n)?n:t.length)}function K(t,e){return 0===q(t,e)}function B(t,e){return t.charCodeAt(e||0)}function G(t){return t.toUpperCase()}function V(t){return t.toLowerCase()}function X(t,e){return q(t,e)>=0}function Z(t){return!b(t)||!t.length}var J=Object.freeze({camelize:function(t){return I[t]||(I[t]=t.replace(_,function(t,e){return G(e)})),I[t]},hyphenate:function(t){return Y[t]||(Y[t]=t.replace(U,function(t,e){return"-"+V(e)})),Y[t]},capitalize:function(t){return L[t]||(L[t]=t.replace(H,G)),L[t]},trim:function(t){return Z(t)?d:t.trim()},slice:M,indexOf:q,lastIndexOf:F,startsWith:K,endsWith:function(t,e){const n=t.length-e.length;return n>=0&&F(t,e)===n},charAt:function(t,e){return t.charAt(e||0)},codeAt:B,upper:G,lower:V,has:X,falsy:Z});const Q=/\./g,tt=/\*/g,et=/\*\*/g,nt={},rt={},it=".";function st(t,e){return t===e?e.length:K(t,e+=it)?e.length:u}function ot(t,n){const r=g(nt[t])?nt[t]:nt[t]=t.split(it);for(let t=0,i=r.length-1;t<=i&&n(r[t],t===i)!==e;t++);}function ct(t,e){let n=rt[e];if(!n){const t=e.replace(Q,"\\.").replace(tt,"(\\w+)").replace(et,"([.\\w]+?)");n=rt[e]=new RegExp(`^${t}$`)}const r=t.match(n);if(r)return r[1]}const ut={value:r};function ft(t){return Object.keys(t)}function at(t,e){return t.length-e.length}function ht(t,e){return e.length-t.length}function lt(t,e){return ft(t).sort(e?ht:at)}function pt(t,n){for(let r in t)if(n(t[r],r)===e)break}function dt(t){pt(t,function(e,n){delete t[n]})}function gt(t,e){return pt(e,function(e,n){t[n]=e}),t}function mt(t,e){let n=t;return v(t)?e?(n=[],O(t,function(t,r){n[r]=mt(t,e)})):n=t.slice():y(t)&&(n={},pt(t,function(t,r){n[r]=e?mt(t,e):t})),n}function vt(t,i){return ot(i,function(i,s){if(t==n)return t=r,e;{let e=t[i],n=g(e);e&&m(e.get)&&(e=e.get()),s?n?(ut.value=e,t=ut):t=r:t=e}}),t}function yt(t,n,r,i){ot(n,function(n,s){if(s)t[n]=r;else if(t[n])t=t[n];else{if(!i)return e;t=t[n]={}}})}function bt(t,e){return g(t[e])}var wt=Object.freeze({keys:ft,sort:lt,each:pt,clear:dt,extend:gt,merge:function(t,e){return t&&e?gt(gt({},t),e):t||e},copy:mt,get:vt,set:yt,has:bt,falsy:function(t){return!y(t)||v(t)||!ft(t).length}});function xt(t,e){return t!=n&&t.toString?t.toString():g(e)?e:d}const $t=1,Et=2,At=3,Ct=4,Ot=5,kt="undefined"!=typeof console?console:n,Pt=/yox/.test(xt(h))?$t:At,jt=f&&/edge|msie|trident/i.test(f.navigator.userAgent)?d:"%c",Rt=kt?jt?function(t,e,n){kt.log(jt+t,n,e)}:function(t,e){kt.log(t,e)}:h;function zt(){if(a){const t=a.YOX_LOG_LEVEL;if(t>=$t&&t<=Ot)return t}return Pt}function St(t){return`background-color:${t};border-radius:12px;color:#fff;font-size:10px;padding:3px 6px;`}var Tt=Object.freeze({DEBUG:$t,INFO:Et,WARN:At,ERROR:Ct,FATAL:Ot,debug:function(t,e){zt()<=$t&&Rt(e||"Yox debug",t,St("#999"))},info:function(t,e){zt()<=Et&&Rt(e||"Yox info",t,St("#2db7f5"))},warn:function(t,e){zt()<=At&&Rt(e||"Yox warn",t,St("#f90"))},error:function(t,e){zt()<=Ct&&Rt(e||"Yox error",t,St("#ed4014"))},fatal:function(t,e){if(zt()<=Ot)throw new Error(`[${e||"Yox fatal"}]: ${t}`)}});class Dt{constructor(t){this.ns=t||e,this.listeners={}}fire(n,i,s){let o=this,{name:c,ns:u}=Wt(o.ns,n),f=o.listeners[c],a=t;if(f){f=mt(f);const t=i&&i[0]instanceof C?i[0]:r;O(f,function(c,h){if(!Ut(u,c)||!D(f,c)||s&&!s(n,i,c))return;t&&(t.listener=c.fn);let l=A(c.fn,c.ctx,i);return t&&(t.listener=r),c.num=c.num?c.num+1:1,c.num===c.max&&o.off(n,c.fn),t&&(l===e?t.prevent().stop():t.isStoped&&(l=e)),l===e?a=e:void 0})}return a}on(t,e){const n=this,{listeners:r}=n,i=m(e)?{fn:e}:e;if(y(i)&&m(i.fn)){const{name:e,ns:s}=Wt(n.ns,t);i.ns=s,R(r[e]||(r[e]=[]),i)}}off(e,n){const r=this,{listeners:i}=r;if(e){const{name:s,ns:o}=Wt(r.ns,e),c=_t(n),u=function(e,n){O(e,function(t,n){c(t)&&Ut(o,t)&&e.splice(n,1)},t),e.length||delete i[n]};s?i[s]&&u(i[s],s):o&&pt(i,u)}else r.listeners={}}has(n,r){let{listeners:i}=this,{name:s,ns:o}=Wt(this.ns,n),c=t,u=_t(r),f=function(t){return O(t,function(t){if(u(t)&&Ut(o,t))return c=e}),c};return s?i[s]&&f(i[s]):o&&pt(i,f),!c}}function Wt(t,e){const n={name:e,ns:d};if(t){const t=q(e,".");t>=0&&(n.name=M(e,0,t),n.ns=M(e,t+1))}return n}function Nt(e){return t}function _t(t){return m(t)?function(e){return t===e.fn}:Nt}function Ut(e,n){const{ns:r}=n;return r&&e?r===e:t}function Ht(t){return m(t)&&/native code/.test(xt(t))}let It;typeof setImmediate===o&&Ht(setImmediate)&&(It=setImmediate);var Yt=It=typeof MessageChannel===o&&Ht(MessageChannel)?function(t){const e=new MessageChannel;e.port1.onmessage=t,e.port2.postMessage(1)}:setTimeout;let Lt;class Mt{static shared(){return Lt||(Lt=new Mt)}constructor(){this.tasks=[]}append(t,e){const n=this,{tasks:r}=n;R(r,{fn:t,ctx:e}),1===r.length&&Yt(function(){n.run()})}prepend(t,e){const n=this,{tasks:r}=n;z(r,{fn:t,ctx:e}),1===r.length&&Yt(function(){n.run()})}clear(){this.tasks.length=0}run(){const{tasks:t}=this;t.length&&(this.tasks=[],O(t,function(t){A(t.fn,t.ctx)}))}}function qt(t,e){return $(t)?+t:g(e)?e:0}class Ft{constructor(e,n,r,i,s,o,c){const u=this;u.keypath=e,u.cache=r,u.deps=i,u.context=s.context,u.observer=s,u.getter=o,u.setter=c,u.unique={},u.watcher=function(n,r,i){const o=u.value,c=u.get(t);c!==o&&s.diff(e,c,o)},u.watcherOptions={sync:n,watcher:u.watcher},(u.fixed=!W(i))&&O(i,function(t){s.watch(t,u.watcherOptions)})}get(t){const e=this,{getter:n,context:r}=e;if(e.cache){if(t||!bt(e,i))if(e.fixed)e.value=A(n,r);else{e.unbind();const t=Ft.current;Ft.current=e,e.value=A(n,r),e.bind(),Ft.current=t}}else e.value=A(n,r);return e.value}set(t){const{setter:e,context:n}=this;e&&e.call(n,t)}add(e){this.unique[e]=t}bind(){const{unique:t,deps:e,observer:n,watcherOptions:r}=this;pt(t,function(t,i){R(e,i),n.watch(i,r)}),this.unique={}}unbind(){const{deps:e,observer:n,watcher:r}=this;O(e,function(t){n.unwatch(t,r)},t),e.length=0}}function Kt(t,n){let r;return O(t,function(t){const i=st(n,t);if(i>=0)return r={name:t,prop:M(n,i)},e}),r}function Bt(t,e){if(t==n||e===d)return t;const r=vt(t,e);return r?r.value:void 0}function Gt(e,n,i,o,c){const u=function(t,n,r){if(n!==r){const u=(s=t,(i=e)&&s?i+it+s:i||s);O(o,function(t){g(ct(u,t))&&c(t,u,n,r)}),Gt(u,n,r,o,c)}var i,s};(function(e,n,i){const o=b(e),c=b(n);if(o||c)return i(s,o?e.length:r,c?n.length:r),t})(n,i,u)||function(e,n,i){const o=v(e),c=v(n);if(o||c){const u=o?e.length:r,f=c?n.length:r;i(s,u,f);for(let t=0,s=Math.max(u||0,f||0);t<s;t++)i(""+t,e?e[t]:r,n?n[t]:r);return t}}(n,i,u)||function(t,e,n){const r=y(t),i=y(e);(r||i)&&(t=r?t:l,e=i?e:l,r&&pt(t,function(t,r){t!==e[r]&&n(r,t,e[r])}),i&&pt(e,function(e,r){e!==t[r]&&n(r,t[r],e)}))}(n,i,u)}function Vt(t,e,n,r,i,s){let o;pt(r,function(r,u){if(function(t){return X(t,c)}(u))return void(g(ct(t,u))?s(u,t,e,n):i&&(o?R(o,u):o=[u]));const f=st(u,t);if(f>=0){const t=M(u,f),r=Bt(e,t),i=Bt(n,t);r!==i&&s(u,u,r,i)}}),o&&Gt(t,e,n,o,s)}function Xt(t,e,n){if(n.count&&e)return n.count--,e[0]!==e[1]}const Zt={watcher:h};function Jt(e,n){return m(e)?(Zt.watcher=e,Zt.immediate=n===t,Zt):e&&e.watcher?e:void 0}class Qt{constructor(t,e){this.data=t||{},this.context=e||this,this.nextTask=new Mt,this.syncEmitter=new Dt,this.asyncEmitter=new Dt,this.asyncChanges={}}get(t,e,n){const r=Ft.current,{data:i,computed:s,reversedComputedKeys:o}=this;if(t===d)return i;let c,u;if(r&&!n&&r.add(t),s){if(u=s[t])return u.get();if(o){const e=Kt(o,t);e&&e.prop&&(c=vt(s[e.name].get(),e.prop))}}return c||(c=vt(i,t)),c?c.value:e}set(t,e){const n=this,{data:r,computed:i,reversedComputedKeys:s}=n,o=function(t,e){const o=n.get(e);if(t===o)return;let c;if(i&&((c=i[e])&&c.set(t),s)){const n=Kt(s,e);if(n&&n.prop&&(c=i[n.name])){const e=c.get();y(e)&&yt(e,n.prop,t)}}c||yt(r,e,t),n.diff(e,t,o)};b(t)?o(e,t):y(t)&&pt(t,o)}diff(e,n,i){const s=this,{syncEmitter:o,asyncEmitter:c,asyncChanges:u}=s,f=36!==B(e);Vt(e,n,i,o.listeners,f,function(t,e,n,r){o.fire(t,[n,r,e])}),Vt(e,n,i,c.listeners,f,function(e,n,i,o){O(c.listeners[e],function(t){t.count++});const{keypaths:f}=u[n]||(u[n]={value:o,keypaths:[]});D(f,e)||R(f,e),s.pending||(s.pending=t,s.nextTask.append(function(){s.pending&&(s.pending=r,s.diffAsync())}))})}diffAsync(){const t=this,{asyncEmitter:e,asyncChanges:n}=t;t.asyncChanges={},pt(n,function(n,r){const i=[t.get(r),n.value,r];O(n.keypaths,function(t){e.fire(t,i,Xt)})})}addComputed(e,n){let r,i,s=t,o=t,c=[];if(m(n))r=n;else if(y(n)){const t=n;x(t.cache)&&(s=t.cache),x(t.sync)&&(o=t.sync),v(t.deps)&&(c=mt(t.deps)),m(t.get)&&(r=t.get),m(t.set)&&(i=t.set)}if(r){const n=this,u=new Ft(e,o,s,c,n,r,i);return n.computed||(n.computed={}),n.computed[e]=u,n.reversedComputedKeys=lt(n.computed,t),u}}removeComputed(e){const n=this,{computed:r}=n;r&&bt(r,e)&&(delete r[e],n.reversedComputedKeys=lt(r,t))}watch(t,e,n){const i=this,{context:s,syncEmitter:o,asyncEmitter:c}=i,u=function(t,e){const n=e.sync?o:c,u={fn:e.watcher,ctx:s,count:0};e.once&&(u.max=1),n.on(t,u),e.immediate&&A(e.watcher,s,[i.get(t),r,t])};b(t)?u(t,Jt(e,n)):pt(t,function(t,e){u(e,Jt(t))})}unwatch(t,e){this.syncEmitter.off(t,e),this.asyncEmitter.off(t,e)}toggle(t){const e=!this.get(t);return this.set(t,e),e}increase(t,e,n){const r=qt(this.get(t),0)+(e||1);if(!w(n)||r<=n)return this.set(t,r),r}decrease(t,e,n){const r=qt(this.get(t),0)-(e||1);if(!w(n)||r>=n)return this.set(t,r),r}insert(n,r,i){let s=this.get(n);s=v(s)?mt(s):[];const{length:o}=s;if(i===t||i===o)s.push(r);else if(i===e||0===i)s.unshift(r);else{if(!(i>0&&i<o))return;s.splice(i,0,r)}return this.set(n,s),t}append(e,n){return this.insert(e,n,t)}prepend(t,n){return this.insert(t,n,e)}removeAt(e,n){let r=this.get(e);if(v(r)&&n>=0&&n<r.length)return(r=mt(r)).splice(n,1),this.set(e,r),t}remove(e,n){let r=this.get(e);if(v(r)&&T(r=mt(r),n))return this.set(e,r),t}copy(t,e){return mt(t,e)}destroy(){this.syncEmitter.off(),this.asyncEmitter.off(),this.nextTask.clear(),dt(this)}}class te{constructor(e){const n=this,r=e||l;n.$emitter=new Dt(t),r.events&&n.on(r.events);let{data:i,props:s,vnode:o,propTypes:c,computed:u,methods:f,watchers:a,extensions:h}=r;n.$options=r,h&&gt(n,h);const p=s?mt(s):{},d=n.$observer=new Qt(p,n);u&&pt(u,function(t,e){d.addComputed(e,t)});const g=m(i)?A(i,n,e):i;y(g)&&pt(g,function(t,e){p[e]=t}),f&&pt(f,function(t,e){n[e]=t}),function(t,e){e&&t.watch(e)}(n,a)}static use(t){t.install(te)}static define(t){return t}static nextTick(t,e){Mt.shared().append(t,e)}static compile(t,e){return d}static directive(t,e){}static transition(t,e){}static component(t,e){}static partial(t,e){}static filter(t,e){}addComputed(t,e){return this.$observer.addComputed(t,e)}removeComputed(t){this.$observer.removeComputed(t)}get(t,e,n){return this.$observer.get(t,e,n)}set(t,e){const{$observer:n}=this;n&&n.set(t,e)}on(t,e){return ne(this,t,e)}once(e,n){return ne(this,e,n,t)}off(t,e){return this.$emitter.off(t,e),this}fire(e,n,r){let i,s=this,o=e instanceof C?e:new C(e),c=[o];if(o.target||(o.target=s),y(n)?R(c,n):n===t&&(r=t),i=s.$emitter.fire(o.type,c)){const{$parent:e,$children:c}=s;r?c&&(o.phase=C.PHASE_DOWNWARD,O(c,function(e){return i=e.fire(o,n,t)})):e&&(o.phase=C.PHASE_UPWARD,i=e.fire(o,n))}return i}watch(t,e,n){return this.$observer.watch(t,e,n),this}unwatch(t,e){return this.$observer.unwatch(t,e),this}loadComponent(t,e){}createComponent(t,e){return this}directive(t,e){}transition(t,e){}component(t,e){}partial(t,e){}filter(t,e){}forceUpdate(t){}render(){}update(t,e){}checkProps(t){}checkProp(t,e){}destroy(){const{$parent:t,$options:e,$emitter:n,$observer:r}=this;r.destroy(),n.off(),dt(this)}nextTick(t){this.$observer.nextTask.append(t,this)}toggle(t){return this.$observer.toggle(t)}increase(t,e,n){return this.$observer.increase(t,e,n)}decrease(t,e,n){return this.$observer.decrease(t,e,n)}insert(t,e,n){return this.$observer.insert(t,e,n)}append(t,e){return this.$observer.append(t,e)}prepend(t,e){return this.$observer.prepend(t,e)}removeAt(t,e){return this.$observer.removeAt(t,e)}remove(t,e){return this.$observer.remove(t,e)}copy(t,e){return this.$observer.copy(t,e)}}function ee(t,e,n,r){const i={fn:n,ctx:t};r&&(i.max=1),t.$emitter.on(e,i)}function ne(t,e,n,r){return b(e)?ee(t,e,n,r):pt(e,function(e,n){ee(t,n,e,r)}),t}te.version="1.0.0-alpha.80",te.is=E,te.array=N,te.object=wt,te.string=J,te.logger=Tt,te.Event=C,te.Emitter=Dt;export default te;
//# sourceMappingURL=yox.esm.min.js.map
