var t=!0,n=!1,e=null,r=void 0,i="function",o="undefined"!=typeof window?window:r,s="undefined"!=typeof document?document:r;var u={},c=[],f="";function a(t){return t!==r}var p=Object.prototype.toString;function h(t,n){return"numeric"===n?b(t):p.call(t).toLowerCase()==="[object "+n+"]"}function v(t){return typeof t===i}function l(t){return Array.isArray(t)}function d(t){return t!==e&&"object"==typeof t}function y(t){return"string"==typeof t}function m(t){return"number"==typeof t}function g(t){return"boolean"==typeof t}function b(t){return m(t)||y(t)&&!isNaN(parseFloat(t))&&isFinite(t)}var x={is:h,func:v,array:l,object:d,string:y,number:m,boolean:g,numeric:b};function w(t,n,e){if(v(t))return l(e)?t.apply(n,e):a(n)?t.call(n,e):a(e)?t(e):t()}var $=function(t,n){this.type=t,this.originalEvent=n};function k(t,e,r){var i=t.length;if(i)if(r)for(var o=i-1;o>=0&&e(t[o],o,t)!==n;o--);else for(var s=0;s<i&&e(t[s],s,t)!==n;s++);}function C(t,n){return t.join(n)}function T(t,n){t[t.length]=n}function E(t,n){t.unshift(n)}function A(t,n,e){l(n)?k(n,function(n){e(t,n)}):e(t,n)}function O(t,n){A(t,n,T)}function P(t,n){A(t,n,E)}function j(t,n,e){var r={};return k(t,function(t){r[n?t[n]:t]=e||t}),r}function S(t,e,r){var i=-1;return k(t,function(t,o){if(r===n?t==e:t===e)return i=o,n}),i}function q(t,n,e){return S(t,n,e)>=0}function D(e,r,i){var o=0;return k(e,function(t,s){(i===n?t==r:t===r)&&(e.splice(s,1),o++)},t),o}function I(t){return!l(t)||!t.length}$.prototype.preventDefault=function(){if(!this.isPrevented){var n=this.originalEvent;n&&n.preventDefault(),this.isPrevented=t}return this},$.prototype.stopPropagation=function(){if(!this.isStoped){var n=this.originalEvent;n&&n.stopPropagation(),this.isStoped=t}return this},$.prototype.prevent=function(){return this.preventDefault()},$.prototype.stop=function(){return this.stopPropagation()};var M={each:k,join:C,push:O,unshift:P,toArray:function(t){return l(t)?t:w([].slice,t)},toObject:j,indexOf:S,has:q,last:function(t){var n=t.length;if(n>0)return t[n-1]},pop:function(t){return t.pop()},remove:D,falsy:I},K=/-([a-z])/gi,L=/\B([A-Z])/g,U={},Y={};function N(t,n,e){return m(e)?n===e?f:t.slice(n,e):t.slice(n)}function z(t,n,e){return t.indexOf(n,a(e)?e:0)}function B(t,n,e){return t.lastIndexOf(n,a(e)?e:t.length)}function F(t,n){return z(t,n)>=0}function W(t,n){return 0===z(t,n)}function G(t,n){return t.charCodeAt(n||0)}function J(t){return!y(t)||!t.length}var R={camelize:function(t){return U[t]||(U[t]=t.replace(K,function(t,n){return n.toUpperCase()})),U[t]},hyphenate:function(t){return Y[t]||(Y[t]=t.replace(L,function(t,n){return"-"+n.toLowerCase()})),Y[t]},trim:function(t){return J(t)?f:t.trim()},slice:N,indexOf:z,lastIndexOf:B,has:F,startsWith:W,endsWith:function(t,n){var e=t.length-n.length;return e>=0&&B(t,n)===e},charAt:function(t,n){return t.charAt(n||0)},codeAt:G,falsy:J};function Z(t,n){return n===r&&(n=f),t!=e&&t.toString?t.toString():n}var H=".",Q={};function V(t,n){return t===n?n.length:W(t,n+=H)?n.length:-1}function X(e,r){if(J(e))r(e,t);else for(var i=0,o=0;t;){if(!((o=z(e,H,i))>0)){r(N(e,i),t);break}if(r(N(e,i,o),n)===n)break;i=o+1}}function _(t){return y(t)?t:m(t)?Z(t):f}function tt(t,n){var e=Q[n];e||(e=n.replace(/\./g,"\\.").replace(/\*\*/g,"([.\\w]+?)").replace(/\*/g,"(\\w+)"),e=Q[n]=new RegExp("^"+e+"$"));var r=t.match(e);if(r)return r[1]}function nt(t){return Object.keys(t)}function et(t,n){return t.length-n.length}function rt(t,n){return n.length-t.length}function it(t,n){return nt(t).sort(n?rt:et)}function ot(t,e){for(var r in t)if(e(t[r],r)===n)break}function st(t,n){return a(t[n])||t.hasOwnProperty(n)}function ut(t){ot(t,function(n,e){delete t[e]})}function ct(t){for(var n=[],e=arguments.length-1;e-- >0;)n[e]=arguments[e+1];return k(n,function(n){ot(n,function(n,e){t[e]=n})}),t}function ft(t,n){var e=t;return l(t)?n?(e=[],k(t,function(t,r){e[r]=ft(t,n)})):e=t.slice():d(t)&&(e={},ot(t,function(t,r){e[r]=n?ft(t,n):t})),e}var at={};function pt(t,i){return X(i,function(i,o){if(t==e)return t=r,n;var s=t[i],u=a(s)||t.hasOwnProperty(i);s&&v(s.get)&&(s=s.get()),o?u?(at.value=s,t=at):t=r:t=s}),t}function ht(t,e,r,i){X(e,function(e,o){if(o)t[e]=r;else if(t[e])t=t[e];else{if(!i)return n;t=t[e]={}}})}var vt={keys:nt,falsy:function(t){return!d(t)||l(t)||!nt(t).length},sort:it,each:ot,has:st,clear:ut,extend:ct,copy:ft,get:pt,set:ht},lt="undefined"!=typeof console?console:e,dt=/yox/.test(Z(function(){}));function yt(){if(o){var t=o.DEBUG;if(g(t))return t}return dt}function mt(t){lt&&yt()&&lt.warn("[Yox warn]: "+t)}function gt(t){throw new Error("[Yox fatal]: "+t)}var bt={log:function(t){lt&&yt()&&lt.log("[Yox log]: "+t)},warn:mt,error:function(t){lt&&lt.error("[Yox error]: "+t)},fatal:gt},xt=function(t){this.ns=t||n,this.listeners={}};function wt(t,n){var e={name:n,ns:f};if(t){var r=z(n,".");r>=0&&(e.name=N(n,0,r),e.ns=N(n,r+1))}return e}function $t(n){return d(n)?function(t){return n===t}:v(n)?function(t){return n===t.fn}:function(n){return t}}function kt(t,n){return!t.length||t===n.ns}function Ct(t){return v(t)&&/native code/.test(Z(t))}xt.prototype.fire=function(e,r,i){var o,s,u;e instanceof $?(o=e,s=e.type,u=d(r)?[o,r]:o):(s=e,r&&(u=r));var c=this,f=wt(c.ns,s),a=f.name,p=f.ns,h=c.listeners[a],v=t;return h&&k(ft(h),function(t,e,f){if((i?i(t,r):kt(p,t))&&q(f,t)){o&&(o.listener=t.fn);var a=w(t.fn,t.ctx,u);return t.num=t.num?t.num+1:1,t.num===t.max&&c.off(s,t),o&&(a===n?o.prevent().stop():o.isStoped&&(a=n)),a===n?v=n:void 0}}),v},xt.prototype.has=function(e,r){var i=this.listeners,o=wt(this.ns,e),s=o.name,u=o.ns,c=t,f=$t(r),a=function(t){return k(t,function(t){if(f(t)&&kt(u,t))return c=n}),c};return s?i[s]&&a(i[s]):u&&ot(i,a),!c},xt.prototype.on=function(t,n,e){var r=this,i=r.listeners,o=function(t,n){if(t){var o=v(t)?{fn:t}:t;if(d(o)&&v(o.fn)){e&&ct(o,e);var s=wt(r.ns,n),u=s.name,c=s.ns;return o.ns=c,void O(i[u]||(i[u]=[]),o)}}gt("注册 "+n+" 事件失败")};y(t)?o(n,t):ot(t,o)},xt.prototype.off=function(n,e){var r=this.listeners;if(n){var i=wt(this.ns,n),o=i.name,s=i.ns,u=$t(e),c=function(n,e){k(n,function(t,n,e){u(t)&&kt(s,t)&&e.splice(n,1)},t),n.length||delete r[e]};o?r[o]&&c(r[o],o):s&&ot(r,c)}else this.listeners={}},typeof setImmediate===i&&Ct(setImmediate)&&setImmediate;var Tt,Et=typeof MessageChannel===i&&Ct(MessageChannel)?function(t){var n=new MessageChannel;n.port1.onmessage=t,n.port2.postMessage(1)}:setTimeout,At=function(){this.nextTasks=[]};At.shared=function(){return Tt||(Tt=new At),Tt},At.prototype.append=function(t){O(this.nextTasks,t),this.start()},At.prototype.prepend=function(t){P(this.nextTasks,t),this.start()},At.prototype.start=function(){var t=this;1===t.nextTasks.length&&Et(function(){t.run()})},At.prototype.clear=function(){this.nextTasks.length=0},At.prototype.run=function(){var t=this.nextTasks;t.length&&(this.nextTasks=[],k(t,w))};function Ot(t,n){return n===r&&(n=0),b(t)?+t:n}var Pt;Pt=f,JSON.stringify(Pt),C(["c","d","e","f","g","a","h","i","b"],",");var jt={sync:t},St={sync:n},qt=function(n,e,r,i,o,s,u){var c=this;c.keypath=n,c.sync=e,c.cache=r,c.deps=[],c.context=o.context,c.observer=o,c.getter=s,c.setter=u,c.unique={},c.callback=function(e,r,i){var s=c.value,u=c.get(t);u!==s&&o.diff(n,u,s)},(c.fixed=!I(i))&&(k(i,function(t){c.add(t)}),c.bind())};function Dt(t,e){var r;return k(t,function(t){var i=V(e,t);if(i>=0)return r={name:t,prop:N(e,i)},n}),r}function It(t,n){if(t==e||n===f)return t;var r=pt(t,n);return r?r.value:void 0}function Mt(n,e,i,o,s){var c=function(t,e,r){if(e!==r){var i=(c=t,u=_(u=n),c=_(c),u===f?c:c!==f?u+H+c:u);k(o,function(t){a(tt(i,t))&&s(t,i,e,r)}),Mt(i,e,r,o,s)}var u,c};(function(n,e,i){var o=y(n),s=y(e);if(o||s)return i("length",o?n.length:r,s?e.length:r),t})(e,i,c)||function(n,e,i){var o=l(n),s=l(e);if(o||s){var u=o?n.length:r,c=s?e.length:r;i("length",u,c);for(var f=0,a=Math.max(u||0,c||0);f<a;f++)i(f,n?n[f]:r,e?e[f]:r);return t}}(e,i,c)||function(t,n,e){var r=d(t),i=d(n);(r||i)&&(t=r?t:u,n=i?n:u,r&&ot(t,function(t,r){t!==n[r]&&e(r,t,n[r])}),i&&ot(n,function(n,r){n!==t[r]&&e(r,t[r],n)}))}(e,i,c)}function Kt(t,n,e,r,i,o){var s;ot(r,function(r,u){if(function(t){return F(t,"*")}(u))a(tt(t,u))?o(u,t,n,e):i&&(s?O(s,u):s=[u]);else{var c=V(u,t);if(c>=0){var f=N(u,c),p=It(n,f),h=It(e,f);p!==h&&o(u,u,p,h)}}}),s&&Mt(t,n,e,s,o)}function Lt(t,n){if(t.count&&n)return t.count--,n[0]!==n[1]}function Ut(n){return n===t?{immediate:t}:d(n)?ft(n):{}}qt.build=function(n,e,r){var i,o,s=t,u=t,f=c;if(v(r)?i=r:d(r)&&(g(r.cache)&&(s=r.cache),g(r.sync)&&(u=r.sync),l(r.deps)&&(f=r.deps),v(r.get)&&(i=r.get),v(r.set)&&(o=r.set)),i)return new qt(n,u,s,f,e,i,o)},qt.prototype.get=function(t){var n=this.getter,e=this.context;if(this.cache){if(t||!st(this,"value"))if(this.fixed)this.value=w(n,e);else{this.unbind();var r=qt.current;qt.current=this,this.value=w(n,e),this.bind(),qt.current=r}}else this.value=w(n,e);return this.value},qt.prototype.set=function(t){var n=this.setter,e=this.context;n&&n.call(e,t)},qt.prototype.add=function(n){this.unique[n]=t},qt.prototype.bind=function(){var t=this.unique,n=this.deps,e=this.observer,r=this.callback,i=this.sync;ot(t,function(t,o){O(n,o),e.watch(o,r,i?jt:St)}),this.unique={}},qt.prototype.unbind=function(){var n=this.deps,e=this.observer,r=this.callback;k(n,function(t){e.unwatch(t,r)},t),n.length=0};var Yt=function(t,n){this.data=t||{},this.context=n||this,this.nextTask=new At,this.syncEmitter=new xt,this.asyncEmitter=new xt,this.asyncChanges={}};Yt.prototype.get=function(t,n,e){var r,i,o=qt.current,s=this.data,u=this.computed,c=this.reversedComputedKeys;if(t===f)return s;if(o&&!e&&o.add(t),u){if(i=u[t])return i.get();if(c){var a=Dt(c,t);a&&a.prop&&(r=pt(u[a.name].get(),a.prop))}}return r||(r=pt(s,t)),r?r.value:n},Yt.prototype.set=function(t,n){var e=this,r=e.data,i=e.computed,o=e.reversedComputedKeys,s=function(t,n){var s=e.get(n);if(t!==s){var u;if(i&&((u=i[n])&&u.set(t),o)){var c=Dt(o,n);if(c&&c.prop&&(u=i[c.name])){var f=u.get();(d(f)||l(f))&&ht(f,c.prop,t)}}u||ht(r,n,t),e.diff(n,t,s)}};y(t)?s(n,t):d(t)&&ot(t,s)},Yt.prototype.diff=function(n,e,i){var o=this,s=o.syncEmitter,u=o.asyncEmitter,c=o.asyncChanges,f=36!==G(n);Kt(n,e,i,s.listeners,f,function(t,n,e,r){s.fire(t,[e,r,n])}),Kt(n,e,i,u.listeners,f,function(n,e,i,s){k(u.listeners[n],function(t){t.count++});var f=(c[e]||(c[e]={value:s,list:[]})).list;q(f,n)||O(f,n),o.pending||(o.pending=t,o.nextTask.append(function(){o.pending&&(o.pending=r,o.diffAsync())}))})},Yt.prototype.diffAsync=function(){var t=this,n=t.asyncEmitter,e=t.asyncChanges;t.asyncChanges={},ot(e,function(e,r){var i=[t.get(r),e.value,r];k(e.list,function(t){n.fire(t,i,Lt)})})},Yt.prototype.addComputed=function(n,e){var r=qt.build(n,this,e);if(r)return this.computed||(this.computed={}),this.computed[n]=r,this.reversedComputedKeys=it(this.computed,t),r},Yt.prototype.removeComputed=function(n){var e=this.computed;e&&st(e,n)&&(delete e[n],this.reversedComputedKeys=it(e,t))},Yt.prototype.watch=function(t,n,e){var i=this,o=i.context,s=i.syncEmitter,u=i.asyncEmitter,c=function(t,n,e){d(n)&&(g(n.immediate)&&(e.immediate=n.immediate),g(n.sync)&&(e.sync=n.sync),g(n.once)&&(e.once=n.once),v(n.watcher)&&(n=n.watcher));var c=e.sync?s:u;if(v(n)){var f={fn:n,ctx:o,count:0};e.once&&(f.max=1),c.on(t,f)}else gt("watcher should be a function.");e.immediate&&w(n,o,[i.get(t),r,t])};y(t)?v(n)||d(n)?c(t,n,Ut(e)):gt("watcher should be a function or object."):ot(t,function(t,n){c(n,t,{})})},Yt.prototype.unwatch=function(t,n){this.syncEmitter.off(t,n),this.asyncEmitter.off(t,n)},Yt.prototype.toggle=function(t){var n=!this.get(t);return this.set(t,n),n},Yt.prototype.increase=function(t,n,e){var r=Ot(this.get(t),0)+(n||1);if(!m(e)||r<=e)return this.set(t,r),r},Yt.prototype.decrease=function(t,n,e){var r=Ot(this.get(t),0)-(n||1);if(!m(e)||r>=e)return this.set(t,r),r},Yt.prototype.insert=function(e,r,i){var o=this.get(e),s=(o=l(o)?ft(o):[]).length;if(i===t||i===s)o.push(r);else if(i===n||0===i)o.unshift(r);else{if(!(i>0&&i<s))return;o.splice(i,0,r)}return this.set(e,o),t},Yt.prototype.append=function(n,e){return this.insert(n,e,t)},Yt.prototype.prepend=function(t,e){return this.insert(t,e,n)},Yt.prototype.removeAt=function(n,e){var r=this.get(n);if(l(r)&&e>=0&&e<r.length)return(r=ft(r)).splice(e,1),this.set(n,r),t},Yt.prototype.remove=function(n,e){var r=this.get(n);if(l(r)&&D(r=ft(r),e))return this.set(n,r),t},Yt.prototype.copy=function(t,n){return ft(t,n)},Yt.prototype.destroy=function(){this.syncEmitter.off(),this.asyncEmitter.off(),this.nextTask.clear(),ut(this)};var Nt=s,zt="textContent";Nt&&(function(t){return t===r}(Nt.body[zt])&&(zt="innerText"),Nt.addEventListener,Nt.body.classList,Nt.querySelector);j(["click","tap"]);var Bt=function(n){var e=this;d(n)||(n=u),e.$options=n,w(n.beforeCreate,e,n);n.el;var r=n.data,i=n.props,o=n.model,s=(n.parent,n.replace,n.computed),c=(n.template,n.transitions,n.components,n.directives,n.partials,n.filters,n.slots),f=n.events,a=n.methods,p=n.watchers,h=n.extensions;h&&ct(e,h),o&&(e.$model=o);var l=i?e.checkPropTypes(i):{};c&&ct(l,c),i&&d(r)&&mt('"data" option expected to be a function.');var y=e.$observer=new Yt(l,e);s&&ot(s,function(t,n){y.addComputed(n,t)});var m=v(r)?w(r,e,n):r;d(m)&&ot(m,function(t,n){st(l,n)?mt('"'+n+'" is already defined as a prop. Use prop default value instead.'):l[n]=t}),e.$emitter=new xt(t),a&&ot(a,function(t,n){e[n]&&gt('"'+n+'" method is conflicted with built-in methods.'),e[n]=t}),w(n.afterCreate,e),f&&e.on(f),p&&y.nextTask.prepend(function(){e.$observer&&e.watch(p)})};Bt.use=function(t){t.install(Bt)},Bt.nextTick=function(t){At.shared().append(t)},Bt.compile=function(t,n){},Bt.directive=function(t,n){},Bt.transition=function(t,n){},Bt.component=function(t,n){},Bt.partial=function(t,n){},Bt.filter=function(t,n){},Bt.checkPropTypes=function(e,r){var o=ft(e);return ot(r,function(r,s){var u,c=r.type,f=r.value,p=r.required,l=e[s];(v(p)&&(p=p(e)),a(l))?c?(J(c)?I(c)||k(c,function(e){if(h(l,e))return u=t,n}):u=h(l,c),u!==t&&mt('The prop "'+s+'" type is not matched.')):mt('The prop "'+s+'" in propTypes has no type.'):p?mt('The prop "'+s+'" is marked as required, but its value is not found.'):a(f)&&(o[s]=c===i?f:v(f)?f(e):f)}),o},Bt.prototype.addComputed=function(t,n){return this.$observer.addComputed(t,n)},Bt.prototype.removeComputed=function(t){this.$observer.removeComputed(t)},Bt.prototype.get=function(t,n,e){return this.$observer.get(t,n,e)},Bt.prototype.set=function(t,n){var e=this.$observer;e&&e.set(t,n)},Bt.prototype.on=function(t,n){return this.$emitter.on(t,n,{ctx:this}),this},Bt.prototype.once=function(t,n){return this.$emitter.on(t,n,{ctx:this,max:1}),this},Bt.prototype.off=function(t,n){return this.$emitter.off(t,n),this},Bt.prototype.fire=function(n,e,r){var i,o,s=n instanceof $?n:new $(n);return s.target||(s.target=this),d(e)?i=e:e===t&&(r=t),(o=this.$emitter.fire(s,i))&&(r?this.$children&&k(this.$children,function(n){return o=n.fire(s,e,t)}):this.$parent&&(o=this.$parent.fire(s,e))),o},Bt.prototype.watch=function(t,n,e){return this.$observer.watch(t,n,e),this},Bt.prototype.watchOnce=function(n,e,r){var i=Ut(r);return i.once=t,this.$observer.watch(n,e,i),this},Bt.prototype.unwatch=function(t,n){return this.$observer.unwatch(t,n),this},Bt.prototype.directive=function(t,n){},Bt.prototype.transition=function(t,n){},Bt.prototype.component=function(t,n){},Bt.prototype.partial=function(t,n){},Bt.prototype.filter=function(t,n){},Bt.prototype.forceUpdate=function(){},Bt.prototype.render=function(){},Bt.prototype.update=function(t,n){},Bt.prototype.checkPropTypes=function(t){var n=this.$options.propTypes;return n?Bt.checkPropTypes(t,n):t},Bt.prototype.create=function(t,n,e){},Bt.prototype.destroy=function(){var t=this.$options,n=this.$emitter,e=this.$observer;w(t.beforeDestroy,this),n.off(),e.destroy(),ut(this),w(t.afterDestroy,this)},Bt.prototype.nextTick=function(t,n){var e=this.$observer.nextTask;n?e.prepend(t):e.append(t)},Bt.prototype.toggle=function(t){return this.$observer.toggle(t)},Bt.prototype.increase=function(t,n,e){return this.$observer.increase(t,n,e)},Bt.prototype.decrease=function(t,n,e){return this.$observer.decrease(t,n,e)},Bt.prototype.insert=function(t,n,e){return this.$observer.insert(t,n,e)},Bt.prototype.append=function(t,n){return this.$observer.append(t,n)},Bt.prototype.prepend=function(t,n){return this.$observer.prepend(t,n)},Bt.prototype.removeAt=function(t,n){return this.$observer.removeAt(t,n)},Bt.prototype.remove=function(t,n){return this.$observer.remove(t,n)},Bt.prototype.copy=function(t,n){return this.$observer.copy(t,n)},Bt.version="1.0.0-alpha",Bt.is=x,Bt.array=M,Bt.object=vt,Bt.string=R,Bt.logger=bt,Bt.Event=$,Bt.Emitter=xt;export default Bt;
