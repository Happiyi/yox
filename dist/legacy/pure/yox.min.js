!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).Yox=n()}(this,function(){"use strict";var t=!0,n=!1,e=null,r=void 0,i=-1,o="length",u="function",s="*",f=".",c="undefined"!=typeof window?window:r,a="undefined"!=typeof global?global:c,p=function(){},h=Object.freeze({}),v=Object.freeze([]),l="";function d(t){return t!==r}function y(t){return typeof t===u}function g(t){return Array.isArray(t)}function m(t){return t!==e&&"object"==typeof t}function b(t){return"string"==typeof t}function w(t){return"number"==typeof t}function x(t){return"boolean"==typeof t}function E(t){return w(t)||b(t)&&!isNaN(parseFloat(t))&&isFinite(t)}var A=Object.freeze({func:y,array:g,object:m,string:b,number:w,boolean:x,numeric:E});function $(t,n,e){if(y(t))return g(e)?t.apply(n,e):d(n)?t.call(n,e):d(e)?t(e):t()}var k=function(){function n(t,e){this.type=t,this.phase=n.PHASE_CURRENT,e&&(this.originalEvent=e)}return n.prototype.preventDefault=function(){if(!this.isPrevented){var n=this.originalEvent;n&&n.preventDefault(),this.isPrevented=t}return this},n.prototype.stopPropagation=function(){if(!this.isStoped){var n=this.originalEvent;n&&n.stopPropagation(),this.isStoped=t}return this},n.prototype.prevent=function(){return this.preventDefault()},n.prototype.stop=function(){return this.stopPropagation()},n.PHASE_CURRENT=0,n.PHASE_UPWARD=1,n.PHASE_DOWNWARD=i,n}();function O(t,e,r){var i=t.length;if(i)if(r)for(var o=i-1;o>=0&&e(t[o],o)!==n;o--);else for(o=0;o<i&&e(t[o],o)!==n;o++);}function C(t,n){t[t.length]=n}function j(t,n){t.unshift(n)}function P(t,n,e){g(n)?O(n,function(n){e(t,n)}):e(t,n)}function R(t,n){P(t,n,C)}function z(t,n){P(t,n,j)}function S(t,e,r){var o=i;return O(t,function(t,i){if(r===n?t==e:t===e)return o=i,n}),o}function T(e,r,i){var o=0;return O(e,function(t,u){(i===n?t==r:t===r)&&(e.splice(u,1),o++)},t),o}function D(t,n,e){return S(t,n,e)>=0}function W(t){return!g(t)||!t.length}var N=Object.freeze({each:O,push:R,unshift:z,indexOf:S,last:function(t){var n=t.length;if(n>0)return t[n-1]},pop:function(t){if(t.length>0)return t.pop()},remove:T,has:D,toArray:function(t){return g(t)?t:$(v.slice,t)},toObject:function(t,n,e){var r={};return O(t,function(t){r[n?t[n]:t]=e||t}),r},join:function(t,n){return t.join(n)},falsy:W}),_=/-([a-z])/gi,U=/\B([A-Z])/g,Y=/^[a-z]/,H={},I={},L={};function M(t,n,e){return w(e)?n===e?l:t.slice(n,e):t.slice(n)}function q(t,n,e){return t.indexOf(n,d(e)?e:0)}function F(t,n,e){return t.lastIndexOf(n,d(e)?e:t.length)}function K(t,n){return 0===q(t,n)}function B(t,n){return t.charCodeAt(n||0)}function G(t){return t.toUpperCase()}function V(t){return t.toLowerCase()}function X(t,n){return q(t,n)>=0}function Z(t){return!b(t)||!t.length}var J=Object.freeze({camelize:function(t){return H[t]||(H[t]=t.replace(_,function(t,n){return G(n)})),H[t]},hyphenate:function(t){return I[t]||(I[t]=t.replace(U,function(t,n){return"-"+V(n)})),I[t]},capitalize:function(t){return L[t]||(L[t]=t.replace(Y,G)),L[t]},trim:function(t){return Z(t)?l:t.trim()},slice:M,indexOf:q,lastIndexOf:F,startsWith:K,endsWith:function(t,n){var e=t.length-n.length;return e>=0&&F(t,n)===e},charAt:function(t,n){return t.charAt(n||0)},codeAt:B,upper:G,lower:V,has:X,falsy:Z}),Q=/\./g,tt=/\*/g,nt=/\*\*/g,et={},rt={};function it(t,n){return t===n?n.length:K(t,n+=f)?n.length:i}function ot(t,e){for(var r=d(et[t])?et[t]:et[t]=t.split(f),i=0,o=r.length-1;i<=o&&e(r[i],i===o)!==n;i++);}function ut(t,n){var e=rt[n];if(!e){var r=n.replace(Q,"\\.").replace(tt,"(\\w+)").replace(nt,"([.\\w]+?)");e=rt[n]=new RegExp("^"+r+"$")}var i=t.match(e);if(i)return i[1]}var st={value:r};function ft(t){return Object.keys(t)}function ct(t,n){return t.length-n.length}function at(t,n){return n.length-t.length}function pt(t,n){return ft(t).sort(n?at:ct)}function ht(t,e){for(var r in t)if(e(t[r],r)===n)break}function vt(t){ht(t,function(n,e){delete t[e]})}function lt(t,n){return ht(n,function(n,e){t[e]=n}),t}function dt(t,n){var e=t;return g(t)?n?(e=[],O(t,function(t,r){e[r]=dt(t,n)})):e=t.slice():m(t)&&(e={},ht(t,function(t,r){e[r]=n?dt(t,n):t})),e}function yt(t,i){return ot(i,function(i,o){if(t==e)return t=r,n;var u=t[i],s=d(u);u&&y(u.get)&&(u=u.get()),o?s?(st.value=u,t=st):t=r:t=u}),t}function gt(t,e,r,i){ot(e,function(e,o){if(o)t[e]=r;else if(t[e])t=t[e];else{if(!i)return n;t=t[e]={}}})}function mt(t,n){return d(t[n])}var bt=Object.freeze({keys:ft,sort:pt,each:ht,clear:vt,extend:lt,merge:function(t,n){return t&&n?lt(lt({},t),n):t||n},copy:dt,get:yt,set:gt,has:mt,falsy:function(t){return!m(t)||g(t)||!ft(t).length}});function wt(t,n){return t!=e&&t.toString?t.toString():d(n)?n:l}var xt=1,Et=2,At=3,$t=4,kt=5,Ot="undefined"!=typeof console?console:e,Ct=/yox/.test(wt(p))?xt:At,jt=c&&/edge|msie|trident/i.test(c.navigator.userAgent)?l:"%c",Pt=Ot?jt?function(t,n,e){Ot.log(jt+t,e,n)}:function(t,n){Ot.log(t,n)}:p;function Rt(){if(a){var t=a.YOX_LOG_LEVEL;if(t>=xt&&t<=kt)return t}return Ct}function zt(t){return"background-color:"+t+";border-radius:12px;color:#fff;font-size:10px;padding:3px 6px;"}var St=Object.freeze({DEBUG:xt,INFO:Et,WARN:At,ERROR:$t,FATAL:kt,debug:function(t,n){Rt()<=xt&&Pt(n||"Yox debug",t,zt("#999"))},info:function(t,n){Rt()<=Et&&Pt(n||"Yox info",t,zt("#2db7f5"))},warn:function(t,n){Rt()<=At&&Pt(n||"Yox warn",t,zt("#f90"))},error:function(t,n){Rt()<=$t&&Pt(n||"Yox error",t,zt("#ed4014"))},fatal:function(t,n){if(Rt()<=kt)throw new Error("["+(n||"Yox fatal")+"]: "+t)}}),Tt=function(){function e(t){this.ns=t||n,this.listeners={}}return e.prototype.fire=function(e,i,o){var u=this,s=b(e)?u.parse(e):e,f=u.listeners[s.name],c=t;if(f){f=dt(f);var a=i&&i[0]instanceof k?i[0]:r;O(f,function(t){if(Nt(s.ns,t)&&D(f,t)&&(!o||o(s,i,t))){a&&(a.listener=t.fn);var e=$(t.fn,t.ctx,i);return a&&(a.listener=r),t.num=t.num?t.num+1:1,t.num===t.max&&u.off(s.key,t.fn),a&&(e===n?a.prevent().stop():a.isStoped&&(e=n)),e===n?c=n:void 0}})}return c},e.prototype.on=function(t,n){var e=this.listeners,r=y(n)?{fn:n}:n;if(m(r)&&y(r.fn)){var i=this.parse(t),o=i.name,u=i.ns;r.ns=u,R(e[o]||(e[o]=[]),r)}},e.prototype.off=function(n,e){var r=this.listeners;if(n){var i=this.parse(n),o=i.name,u=i.ns,s=Wt(e),f=function(n,e){O(n,function(t,e){s(t)&&Nt(u,t)&&n.splice(e,1)},t),n.length||delete r[e]};o?r[o]&&f(r[o],o):u&&ht(r,f)}else this.listeners={}},e.prototype.has=function(e,r){var i=this.listeners,o=this.parse(e),u=o.name,s=o.ns,f=t,c=Wt(r),a=function(t){return O(t,function(t){if(c(t)&&Nt(s,t))return f=n}),f};return u?i[u]&&a(i[u]):s&&ht(i,a),!f},e.prototype.parse=function(t){var n={key:t,name:t,ns:l};if(this.ns){var e=q(t,f);e>=0&&(n.name=M(t,0,e),n.ns=M(t,e+1))}return n},e}();function Dt(){return t}function Wt(t){return y(t)?function(n){return t===n.fn}:Dt}function Nt(n,e){var r=e.ns;return r&&n?r===n:t}function _t(t){return y(t)&&/native code/.test(wt(t))}typeof setImmediate===u&&_t(setImmediate)&&setImmediate;var Ut,Yt=typeof MessageChannel===u&&_t(MessageChannel)?function(t){var n=new MessageChannel;n.port1.onmessage=t,n.port2.postMessage(1)}:setTimeout,Ht=function(){function t(){this.tasks=[]}return t.shared=function(){return Ut||(Ut=new t)},t.prototype.append=function(t,n){var e=this,r=e.tasks;R(r,{fn:t,ctx:n}),1===r.length&&Yt(function(){e.run()})},t.prototype.prepend=function(t,n){var e=this,r=e.tasks;z(r,{fn:t,ctx:n}),1===r.length&&Yt(function(){e.run()})},t.prototype.clear=function(){this.tasks.length=0},t.prototype.run=function(){var t=this.tasks;t.length&&(this.tasks=[],O(t,function(t){$(t.fn,t.ctx)}))},t}();function It(t,n){return E(t)?+t:d(n)?n:0}var Lt=function(){function n(n,e,r,i,o,u,s){var f=this;f.keypath=n,f.cache=r,f.deps=i,f.context=o.context,f.observer=o,f.getter=u,f.setter=s,f.unique={},f.watcher=function(e,r,i){var u=f.value,s=f.get(t);s!==u&&o.diff(n,s,u)},f.watcherOptions={sync:e,watcher:f.watcher},(f.fixed=!W(i))&&O(i,function(t){o.watch(t,f.watcherOptions)})}return n.prototype.get=function(t){var e=this.getter,r=this.context;if(this.cache){if(t||!mt(this,"value"))if(this.fixed)this.value=$(e,r);else{this.unbind();var i=n.current;n.current=this,this.value=$(e,r),this.bind(),n.current=i}}else this.value=$(e,r);return this.value},n.prototype.set=function(t){var n=this.setter,e=this.context;n&&n.call(e,t)},n.prototype.add=function(n){this.unique[n]=t},n.prototype.bind=function(){var t=this.unique,n=this.deps,e=this.observer,r=this.watcherOptions;ht(t,function(t,i){R(n,i),e.watch(i,r)}),this.unique={}},n.prototype.unbind=function(){var n=this.deps,e=this.observer,r=this.watcher;O(n,function(t){e.unwatch(t,r)},t),n.length=0},n}();function Mt(t,e){var r;return O(t,function(t){var i=it(e,t);if(i>=0)return r={name:t,prop:M(e,i)},n}),r}function qt(t,n){if(t==e||n===l)return t;var r=yt(t,n);return r?r.value:void 0}function Ft(n,e,i,u,s){var c=function(t,e,r){if(e!==r){var i=(c=t,(o=n)&&c?o+f+c:o||c);O(u,function(t){d(ut(i,t))&&s(t,i,e,r)}),Ft(i,e,r,u,s)}var o,c};(function(n,e,i){var u=b(n),s=b(e);if(u||s)return i(o,u?n.length:r,s?e.length:r),t})(e,i,c)||function(n,e,i){var u=g(n),s=g(e);if(u||s){var f=u?n.length:r,c=s?e.length:r;i(o,f,c);for(var a=0,p=Math.max(f||0,c||0);a<p;a++)i(""+a,n?n[a]:r,e?e[a]:r);return t}}(e,i,c)||function(t,n,e){var r=m(t),i=m(n);(r||i)&&(t=r?t:h,n=i?n:h,r&&ht(t,function(t,r){t!==n[r]&&e(r,t,n[r])}),i&&ht(n,function(n,r){n!==t[r]&&e(r,t[r],n)}))}(e,i,c)}function Kt(t,n,e,r,i,o){var u;ht(r,function(r,f){if(function(t){return X(t,s)}(f))d(ut(t,f))?o(f,t,n,e):i&&(u?R(u,f):u=[f]);else{var c=it(f,t);if(c>=0){var a=M(f,c),p=qt(n,a),h=qt(e,a);p!==h&&o(f,f,p,h)}}}),u&&Ft(t,n,e,u,o)}function Bt(t,n,e){if(e.count&&n)return e.count--,n[0]!==n[1]}var Gt={watcher:p};function Vt(n,e){return y(n)?(Gt.watcher=n,Gt.immediate=e===t,Gt):n&&n.watcher?n:void 0}var Xt=function(){function e(t,n){this.data=t||{},this.context=n||this,this.nextTask=new Ht,this.syncEmitter=new Tt,this.asyncEmitter=new Tt,this.asyncChanges={}}return e.prototype.get=function(t,n,e){var r,i,o=Lt.current,u=this.data,s=this.computed,f=this.reversedComputedKeys;if(t===l)return u;if(o&&!e&&o.add(t),s){if(i=s[t])return i.get();if(f){var c=Mt(f,t);c&&c.prop&&(r=yt(s[c.name].get(),c.prop))}}return r||(r=yt(u,t)),r?r.value:n},e.prototype.set=function(t,n){var e=this,r=e.data,i=e.computed,o=e.reversedComputedKeys,u=function(t,n){var u=e.get(n);if(t!==u){var s;if(i&&((s=i[n])&&s.set(t),o)){var f=Mt(o,n);if(f&&f.prop&&(s=i[f.name])){var c=s.get();m(c)&&gt(c,f.prop,t)}}s||gt(r,n,t),e.diff(n,t,u)}};b(t)?u(n,t):m(t)&&ht(t,u)},e.prototype.diff=function(n,e,i){var o=this,u=o.syncEmitter,s=o.asyncEmitter,f=o.asyncChanges,c=36!==B(n);Kt(n,e,i,u.listeners,c,function(t,n,e,r){u.fire(t,[e,r,n])}),Kt(n,e,i,s.listeners,c,function(n,e,i,u){O(s.listeners[n],function(t){t.count++});var c=(f[e]||(f[e]={value:u,keypaths:[]})).keypaths;D(c,n)||R(c,n),o.pending||(o.pending=t,o.nextTask.append(function(){o.pending&&(o.pending=r,o.diffAsync())}))})},e.prototype.diffAsync=function(){var t=this,n=t.asyncEmitter,e=t.asyncChanges;t.asyncChanges={},ht(e,function(e,r){var i=[t.get(r),e.value,r];O(e.keypaths,function(t){n.fire(t,i,Bt)})})},e.prototype.addComputed=function(n,e){var r,i,o=t,u=t,s=[];if(y(e))r=e;else if(m(e)){var f=e;x(f.cache)&&(o=f.cache),x(f.sync)&&(u=f.sync),g(f.deps)&&(s=dt(f.deps)),y(f.get)&&(r=f.get),y(f.set)&&(i=f.set)}if(r){var c=new Lt(n,u,o,s,this,r,i);return this.computed||(this.computed={}),this.computed[n]=c,this.reversedComputedKeys=pt(this.computed,t),c}},e.prototype.removeComputed=function(n){var e=this.computed;e&&mt(e,n)&&(delete e[n],this.reversedComputedKeys=pt(e,t))},e.prototype.watch=function(t,n,e){var i=this,o=i.context,u=i.syncEmitter,s=i.asyncEmitter,f=function(t,n){var e=n.sync?u:s,f={fn:n.watcher,ctx:o,count:0};n.once&&(f.max=1),e.on(t,f),n.immediate&&$(n.watcher,o,[i.get(t),r,t])};b(t)?f(t,Vt(n,e)):ht(t,function(t,n){f(n,Vt(t))})},e.prototype.unwatch=function(t,n){this.syncEmitter.off(t,n),this.asyncEmitter.off(t,n)},e.prototype.toggle=function(t){var n=!this.get(t);return this.set(t,n),n},e.prototype.increase=function(t,n,e){var r=It(this.get(t),0)+(n||1);if(!w(e)||r<=e)return this.set(t,r),r},e.prototype.decrease=function(t,n,e){var r=It(this.get(t),0)-(n||1);if(!w(e)||r>=e)return this.set(t,r),r},e.prototype.insert=function(e,r,i){var o=this.get(e),u=(o=g(o)?dt(o):[]).length;if(i===t||i===u)o.push(r);else if(i===n||0===i)o.unshift(r);else{if(!(i>0&&i<u))return;o.splice(i,0,r)}return this.set(e,o),t},e.prototype.append=function(n,e){return this.insert(n,e,t)},e.prototype.prepend=function(t,e){return this.insert(t,e,n)},e.prototype.removeAt=function(n,e){var r=this.get(n);if(g(r)&&e>=0&&e<r.length)return(r=dt(r)).splice(e,1),this.set(n,r),t},e.prototype.remove=function(n,e){var r=this.get(n);if(g(r)&&T(r=dt(r),e))return this.set(n,r),t},e.prototype.copy=function(t,n){return dt(t,n)},e.prototype.destroy=function(){this.syncEmitter.off(),this.asyncEmitter.off(),this.nextTask.clear(),vt(this)},e}();function Zt(t,n,e,r){var i={fn:e,ctx:t};r&&(i.max=1),t.$emitter.on(n,i)}function Jt(t,n,e,r){b(n)?Zt(t,n,e,r):ht(n,function(n,e){Zt(t,e,n,r)})}return function(){function n(n){var e=this,r=n||h;e.$emitter=new Tt(t),r.events&&e.on(r.events);var i=r.data,o=r.props,u=(r.vnode,r.propTypes,r.computed),s=r.methods,f=r.watchers,c=r.extensions;e.$options=r,c&&lt(e,c);var a=o?dt(o):{},p=e.$observer=new Xt(a,e);u&&ht(u,function(t,n){p.addComputed(n,t)});var v=y(i)?$(i,e,n):i;m(v)&&ht(v,function(t,n){a[n]=t}),s&&ht(s,function(t,n){e[n]=t}),function(t,n){n&&t.watch(n)}(e,f)}return n.use=function(t){t.install(n)},n.define=function(t){return t},n.nextTick=function(t,n){Ht.shared().append(t,n)},n.compile=function(t,n){return l},n.directive=function(t,n){},n.transition=function(t,n){},n.component=function(t,n){},n.partial=function(t,n){},n.filter=function(t,n){},n.prototype.get=function(t,n){return this.$observer.get(t,n)},n.prototype.set=function(t,n){var e=this.$observer;e&&e.set(t,n)},n.prototype.on=function(t,n){return Jt(this,t,n),this},n.prototype.once=function(n,e){return Jt(this,n,e,t),this},n.prototype.off=function(t,n){return this.$emitter.off(t,n),this},n.prototype.fire=function(n,e,r){var i,o=this.$emitter,u=this.$parent,s=this.$children,f=n instanceof k?n:new k(n),c=f.ns||(f.ns=o.parse(f.type)),a=[f];return f.target||(f.target=this),m(e)?R(a,e):e===t&&(r=t),(i=o.fire(c,a))&&(r?s&&(f.phase=k.PHASE_DOWNWARD,O(s,function(n){return i=n.fire(f,e,t)})):u&&(f.phase=k.PHASE_UPWARD,i=u.fire(f,e))),i},n.prototype.watch=function(t,n,e){return this.$observer.watch(t,n,e),this},n.prototype.unwatch=function(t,n){return this.$observer.unwatch(t,n),this},n.prototype.loadComponent=function(t,n){},n.prototype.createComponent=function(t,n){return this},n.prototype.directive=function(t,n){},n.prototype.transition=function(t,n){},n.prototype.component=function(t,n){},n.prototype.partial=function(t,n){},n.prototype.filter=function(t,n){},n.prototype.forceUpdate=function(t){},n.prototype.render=function(){},n.prototype.update=function(t,n){},n.prototype.checkProp=function(t,n){},n.prototype.destroy=function(){this.$parent,this.$options;var t=this.$emitter;this.$observer.destroy(),t.off(),vt(this)},n.prototype.nextTick=function(t){this.$observer.nextTask.append(t,this)},n.prototype.toggle=function(t){return this.$observer.toggle(t)},n.prototype.increase=function(t,n,e){return this.$observer.increase(t,n,e)},n.prototype.decrease=function(t,n,e){return this.$observer.decrease(t,n,e)},n.prototype.insert=function(t,n,e){return this.$observer.insert(t,n,e)},n.prototype.append=function(t,n){return this.$observer.append(t,n)},n.prototype.prepend=function(t,n){return this.$observer.prepend(t,n)},n.prototype.removeAt=function(t,n){return this.$observer.removeAt(t,n)},n.prototype.remove=function(t,n){return this.$observer.remove(t,n)},n.prototype.copy=function(t,n){return this.$observer.copy(t,n)},n.version="1.0.0-alpha.87",n.is=A,n.array=N,n.object=bt,n.string=J,n.logger=St,n.Event=k,n.Emitter=Tt,n}()});
//# sourceMappingURL=yox.min.js.map
